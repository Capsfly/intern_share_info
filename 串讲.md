# s





| 模块         | 作用                               |
| ------------ | ---------------------------------- |
| select_frame | 选择frame，并且进行配置frame的参数 |
| parse_as     |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |
|              |                                    |







# select_frame

## 数据成员

![image-20230202164148194](assets/image-20230202164148194.png)









## process主体思路

首先利用map进行排序， 然后配置frame的参数







# access_sven_as



## 数据成员

![image-20230201110245438](/Users/suichunyu/Library/Application Support/typora-user-images/image-20230201110245438.png)





# 参考链接

https://ku.baidu-int.com/knowledge/HFVrC7hq1Q/pmquNWcpSA/KZD1A4u2_x/wYZojGaLozKMdj







召回什么意思（检索比较相似的结果）

过滤（filter_frame_num，如果为2，含义为如果相似的图片大于两个，则相似的图片数目超过2个，则不允许） 

 翻转（flip），图片翻转

黑库：识别指定敏感图片、视频、文本、音频

短带长：从小视频检索出类似的长视频全集



afs:分布式文件系统，存储离线资源



# vs相似结果（SimiResult ）

相似片段（用vector来存储）

标题、文本相似得分

思路：

1. 先获取阈值（如果有就用传来的）

2. 配置filter参数
3. 查看相似的
4. 排序
5. 跟0比较





# as模块

使用的查重算法：orb和cnn



## 相关配置

/home/disk3/suichunyu/as_read/baidu/feed-cv/audio-as/noahdes/value





## 作用





## 整体架构图

![image-20230202164653761](assets/image-20230202164653761.png)





## 详细流程图（代码流程）

![image-20230202190525346](assets/image-20230202190525346.png)



## VisAsServiceImpl流程



## 数据成员

baidu::maze::MultiIndexManager

baidu::maze::ParallelManager

![image-20230202184135127](assets/image-20230202184135127.png)







### MultiIndexManager 





### MultiIndexManager::batch_search_async

<img src="assets/image-20230202190603664.png" alt="image-20230202190603664" style="zoom:50%;" /> 

### MultiIndexManager::search_urs

![image-20230202203546374](assets/image-20230202203546374.png)





### MultiIndexManager::search_urs_cover

![image-20230202200020311](assets/image-20230202200020311.png)





## ParallelManager





### ParallelManager::batch_search_async

![image-20230202192234829](assets/image-20230202192234829.png)













urs?urs_stub.urs_recall





# bs模块



## audio_bs::SimiBsServiceImpl



### SimiBsServiceImpl::search

![image-20230203191135211](assets/image-20230203191135211.png)
